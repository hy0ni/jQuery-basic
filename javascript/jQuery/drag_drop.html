<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mouse drag & drop</title>
</head>

<body>
  <div id="box" style="position:absolute;left:100px;top:100px;width:50px;height:50px;background-color:#ff0000;"></div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    //상자를 드래그 하는 중인지 여부를 표시할 변수
    var isDragging = false;

    // 마지막으로 이벤트가 발생한 시점의 마우스 좌표
    var mouseX, mouseY

    // 박스에서 마우스를 눌렀을 때
    $('#box').on('mousedown', function (ev) {
      isDragging = true;
      mouseX = ev.clientX;
      mouseY = ev.clientY;
    })

    // 박스에서 마우스를 뗐을 때
    $('#box').on('mouseup', function () {
      isDragging = false;
    })

    // 문서에서 마우스가 이동할 때
    $(document).on('mousemove', function (ev) {
      //드래그하는 중일때에만 박스가 마우스를 따라오도록
      if (isDragging) {
        $('#box').css({
          'left': (parseInt($('#box').css('left').replace('px', "")) + (ev.clientX - mouseX)) + 'px', // 원래의 위치에서 이동한 만큼만 박스가 움직이도록
          'top': (parseInt($('#box').css('top').replace('px', "")) + (ev.clientY - mouseY)) + 'px',
        });
        mouseX = ev.clientX;
        mouseY = ev.clientY;
      }
    })

// $('#box').css('left') 원래있던자리 '100px'

    // 마우스의 x,y 좌표 얻기
    // ev.clientX
    // ev.clientY
  </script>
</body>

</html>